import { getCollection, type CollectionEntry } from "astro:content";
import { Image } from "astro:assets";
import BaseLayout from "../../../layouts/BaseLayout.astro";
import { languages } from "../../../i18n/ui";

export async function getStaticPaths() {
  const authors = await getCollection("authors");
  const paths = [];

  for (const lang of Object.keys(languages)) {
    for (const author of authors) {
      paths.push({
        params: { slug: author.id, lang },
        props: { author },
      });
    }
  }
  return paths;
}

interface Props {
  author: CollectionEntry<"authors">;
}

const { author } = Astro.props;
const { lang } = Astro.params;

const allPosts = await getCollection("blog");

const posts = allPosts.filter(
  (post) =>
    post.data.author.id === author.id && post.slug.startsWith(`${lang}/`)
);

const authorName = author.data.name[lang];
const authorBio = author.data.bio[lang];

<BaseLayout title="test" description="test">
  <h1>Test</h1>
</BaseLayout>

<style>
  .author-header {
    text-align: center;
    padding: 2em 0;
  }
  .author-header img {
    border-radius: 50%;
    margin-bottom: 1em;
  }
  .social-links {
    display: flex;
    justify-content: center;
    gap: 1em;
    margin-top: 1em;
  }
  .social-links a {
    text-decoration: none;
    color: var(--accent);
  }
  .social-links a:hover {
    color: var(--accent-dark);
  }
  h2 {
    text-align: center;
    margin-top: 2em;
    margin-bottom: 1em;
  }
  ul {
    list-style-type: none;
    padding: 0;
    max-width: 720px;
    margin: auto;
  }
  li {
    margin-bottom: 0.5em;
    text-align: center;
  }
  li a {
    font-size: 1.25rem;
    text-decoration: none;
    color: var(--accent);
  }
  li a:hover {
    color: var(--accent-dark);
  }
</style>